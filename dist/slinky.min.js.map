{"version":3,"sources":["slinky.js"],"names":["MAIN_CLASS","HEADER_CLASS","TITLE_CLASS","NEXT_CLASS","BACK_CLASS","Slinky","speed","element","options","arguments","length","undefined","_classCallCheck","this","title","settings","backLabelMarkup","nextLabelMarkup","backClass","titleLabelMarkup","mainClass","headerClass","titleClass","nextClass","menu","jQuery","base","children","first","addClass","theme","_init","header","console","log","each","index","parent","_transition","label","attr","text","append","back","replaceWith","_addListeners","prepend","_jumpToInitial","i","el","prev","replace","_this","link","currentTarget","hasClass","e","_clicked","Date","now","_move","find","removeClass","resize","hide","parentsUntil","show","_resize","next","active","callback","jump","setTimeout","height","outerHeight","css","animate","Math","round","parseInt","get","style","left","concat","depth","content","menus","target","to","count","parents","not","styles","forEach","_this2","remove","off","transition-duration","contents","unwrap","split","indexOf","field","fn","slinky"],"mappings":"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","file":"slinky.min.js","sourcesContent":["/*\r\n * Fork Slinky\r\n * Rather sweetmenus\r\n * @author Ali Zahid <ali.zahid@live.com>\r\n * @author fork Panda Tamara <link@mimika-team.ru>\r\n * @license MIT\r\n */\r\n\r\n/**\r\n * Static constants\r\n */\r\nconst\r\n    MAIN_CLASS = 'sm-wrap',\r\n    HEADER_CLASS = 'sm-header',\r\n    TITLE_CLASS = 'sm-title',\r\n    NEXT_CLASS = 'sm-next',\r\n    BACK_CLASS = 'sm-back';\r\n\r\nclass Slinky {\r\n\r\n    // default options\r\n    get options() {\r\n        return {\r\n            resize: true,\r\n            speed: 300,\r\n            theme: false,\r\n            title: true,\r\n            backLabelMarkup: '<label><i class=\"sm-back-icon\"></i></label>',\r\n            nextLabelMarkup: '<label>%title%<i class=\"sm-next-icon\"></i></label>',\r\n            titleLabelMarkup: '<label />',\r\n            mainClass: false,\r\n            headerClass: false,\r\n            backClass: false,\r\n            titleClass: false,\r\n            nextClass: false\r\n        }\r\n    }\r\n\r\n    constructor(element, options = {}) {\r\n        // save settings\r\n        this.settings = {\r\n            ...this.options,\r\n            ...options\r\n        }\r\n\r\n        // let's go!\r\n        this._init(element)\r\n    }\r\n\r\n    // setup the DOM just for us\r\n    _init(element) {\r\n        // the two elements of water and moisture\r\n        this.menu = jQuery(element)\r\n        this.base = this.menu.children().first()\r\n\r\n        const {base, menu, settings} = this\r\n\r\n        // set theme\r\n        menu.addClass(MAIN_CLASS).addClass(settings.mainClass).addClass(settings.theme)\r\n\r\n        // set transition speed\r\n        this._transition(settings.speed)\r\n\r\n        // create header item\r\n        const header = jQuery('<li>').addClass(HEADER_CLASS).addClass(settings.headerClass)\r\n\r\n        // prepend it to the list\r\n        jQuery('li > ul', menu).prepend(header)\r\n\r\n        // do we need to add titles?\r\n        console.log(settings.title);\r\n        if (settings.title) {\r\n            // loop through each child list\r\n            jQuery('li > ul', menu).each((index, element) => {\r\n                // get the label from the parent link\r\n                const label = jQuery(element)\r\n                    .parent()\r\n                    .find('a')\r\n                    .first()\r\n\r\n                console.log(label.text());\r\n                console.log('--');\r\n\r\n                // if it's not empty, create the title\r\n                if (label) {\r\n                    /*const title = jQuery('<header>')\r\n                      .addClass(TITLE_CLASS)\r\n                      .text(label)*/\r\n\r\n                    const title = jQuery(label.attr('href') === '#' ? jQuery('<label>') : jQuery('<a>').attr('href', label.attr('href')))\r\n                        .addClass(TITLE_CLASS)\r\n                        .addClass(settings.titleClass)\r\n                        .text(label.text())\r\n\r\n                    //console.log(title);\r\n\r\n                    // append it to the immediate header\r\n                    // TODO use header var\r\n                    jQuery('> .' + HEADER_CLASS, element).append(title)\r\n\r\n                    //jQuery(header, element).append(title)\r\n\r\n                }\r\n            })\r\n\r\n            console.log('-------');\r\n        }\r\n\r\n\r\n\r\n        // create back buttons\r\n        const back =\r\n            jQuery(settings.backLabelMarkup)\r\n                .addClass(BACK_CLASS)\r\n                .addClass(settings.backClass)\r\n\r\n        // prepend them to the headers\r\n        jQuery('.' + HEADER_CLASS, menu).prepend(back)\r\n\r\n        // add arrows to links with children\r\n        jQuery('a + ul', menu).each(function (i, el) {\r\n            jQuery(el)\r\n                .prev()\r\n                .replaceWith(jQuery(settings.nextLabelMarkup.replace('%title%', jQuery(el).prev().text()))\r\n                    .addClass(NEXT_CLASS)\r\n                    .addClass(settings.nextClass)\r\n                )\r\n\r\n        });\r\n\r\n        // add click listeners\r\n        this._addListeners()\r\n\r\n        // jump to initial active\r\n        this._jumpToInitial()\r\n    }\r\n\r\n    // click listeners\r\n    _addListeners() {\r\n        const {menu, settings} = this\r\n\r\n        jQuery('label', menu).on('click', e => {\r\n            // prevent broken/half transitions\r\n            if (this._clicked + settings.speed > Date.now()) {\r\n                return false\r\n            }\r\n\r\n            // cache click time to check on next click\r\n            this._clicked = Date.now()\r\n\r\n            // get the link\r\n            const link = jQuery(e.currentTarget)\r\n\r\n\r\n            // time to move\r\n            if (link.hasClass(BACK_CLASS)) {\r\n                // and two steps back\r\n                // just one step back, actually\r\n\r\n                // make the move\r\n                this._move(-1, () => {\r\n                    // remove the current active\r\n                    menu.find('.active').removeClass('active')\r\n\r\n                    // set the new active\r\n                    link\r\n                        .parent()\r\n                        .parent()\r\n                        .hide()\r\n                        .parentsUntil(menu, 'ul')\r\n                        .first()\r\n                        .addClass('active')\r\n                })\r\n\r\n                // resize the menu if need be\r\n                if (settings.resize) {\r\n                    this._resize(\r\n                        link\r\n                            .parent()\r\n                            .parent()\r\n                            .parentsUntil(menu, 'ul')\r\n                    )\r\n                }\r\n\r\n            } else if (link.hasClass(NEXT_CLASS)) {\r\n                // one step forward\r\n\r\n                // remove the current active\r\n                menu.find('.active').removeClass('active')\r\n\r\n                // set the new active\r\n                link\r\n                    .next()\r\n                    .show()\r\n                    .addClass('active')\r\n\r\n                // make the chess move\r\n                this._move(1)\r\n\r\n                // resize the menu if need be\r\n                if (settings.resize) {\r\n                    this._resize(link.next())\r\n                }\r\n            }\r\n\r\n        })\r\n    }\r\n\r\n    // jump to initial active on init\r\n    _jumpToInitial() {\r\n        const {menu, settings} = this\r\n\r\n        // get initial active\r\n        const active = menu.find('.active')\r\n\r\n        if (active.length > 0) {\r\n            // remove initial active\r\n            active.removeClass('active')\r\n\r\n            // jump without animation\r\n            this.jump(active, false)\r\n        }\r\n\r\n        // set initial height on the menu\r\n        // to fix the first transition resize bug\r\n        setTimeout(() => menu.height(menu.outerHeight()), settings.speed)\r\n    }\r\n\r\n    // slide the menu\r\n    _move(depth = 0, callback = () => {\r\n    }) {\r\n        // don't bother packing if we're not going anywhere\r\n        if (depth === 0) {\r\n            return\r\n        }\r\n\r\n        const {settings, base} = this\r\n\r\n        // get current position from the left\r\n        const left = Math.round(parseInt(base.get(0).style.left)) || 0\r\n\r\n        // set the new position from the left\r\n        base.css('left', `${left - depth * 100}%`)\r\n\r\n        // callback after the animation\r\n        if (typeof callback === 'function') {\r\n            setTimeout(callback, settings.speed)\r\n        }\r\n    }\r\n\r\n    // resize the menu\r\n    // to match content height\r\n    _resize(content) {\r\n        const {menu} = this\r\n\r\n        menu.height(content.outerHeight())\r\n    }\r\n\r\n    // set the transition speed\r\n    _transition(speed = 300) {\r\n        const {menu, base} = this\r\n\r\n        menu.css('transition-duration', `${speed}ms`)\r\n        base.css('transition-duration', `${speed}ms`)\r\n    }\r\n\r\n    // jump to an element\r\n    jump(target, animate = true) {\r\n        if (!target) {\r\n            return\r\n        }\r\n\r\n        const {menu, settings} = this\r\n\r\n        const to = jQuery(target)\r\n\r\n        // get all current active\r\n        const active = menu.find('.active')\r\n\r\n        // how many moves must we jump?\r\n        let count = 0\r\n\r\n        // this many\r\n        // until we reach the parent list\r\n        if (active.length > 0) {\r\n            count = active.parentsUntil(menu, 'ul').length\r\n        }\r\n\r\n        // remove current active\r\n        // hide all lists\r\n        menu\r\n            .find('ul')\r\n            .removeClass('active')\r\n            .hide()\r\n\r\n        // get parent list\r\n        const menus = to.parentsUntil(menu, 'ul')\r\n\r\n        // show parent list\r\n        menus.show()\r\n\r\n        //\r\n        to.show().addClass('active')\r\n\r\n        // set transition speed to 0 if no animation\r\n        if (!animate) {\r\n            this._transition(0)\r\n        }\r\n\r\n        // make the checkers move\r\n        this._move(menus.length - count)\r\n\r\n        // resize menu if need be\r\n        if (settings.resize) {\r\n            this._resize(to)\r\n        }\r\n\r\n        // set transition speed to default after transition\r\n        if (!animate) {\r\n            this._transition(settings.speed)\r\n        }\r\n    }\r\n\r\n    // go big or go home\r\n    // just go home\r\n    home(animate = true) {\r\n        const {base, menu, settings} = this\r\n\r\n        // set transition speed to 0 if no animation\r\n        if (!animate) {\r\n            this._transition(0)\r\n        }\r\n\r\n        // get current active\r\n        const active = menu.find('.active')\r\n\r\n        // get all parent lists\r\n        const parents = active.parentsUntil(menu, 'ul')\r\n\r\n        // make the move\r\n        this._move(-parents.length, () => {\r\n            // remove the current active\r\n            active.removeClass('active').hide()\r\n\r\n            // hide all parents except base\r\n            parents.not(base).hide()\r\n        })\r\n\r\n        // resize if need be\r\n        if (settings.resize) {\r\n            this._resize(base)\r\n        }\r\n\r\n        // set transition speed back to default\r\n        if (animate === false) {\r\n            this._transition(settings.speed)\r\n        }\r\n    }\r\n\r\n    // crush, kill, destroy\r\n    destroy() {\r\n        const {base, menu, settings} = this\r\n\r\n        // remove all headers\r\n        jQuery('.' + HEADER_CLASS, menu).remove()\r\n\r\n        // remove Slinky links\r\n        // and click listeners\r\n        jQuery('a', menu)\r\n            .removeClass('next')\r\n            .off('click')\r\n\r\n        // remove inline styles\r\n        menu.css({\r\n            height: '',\r\n            'transition-duration': ''\r\n        })\r\n\r\n        base.css({\r\n            left: '',\r\n            'transition-duration': ''\r\n        })\r\n\r\n        // remove Slinky HTML\r\n        jQuery('li > a > span', menu)\r\n            .contents()\r\n            .unwrap()\r\n\r\n        // remove any current active\r\n        menu.find('.active').removeClass('active')\r\n\r\n        // remove any Slinky style classes\r\n        const styles = menu.attr('class').split(' ')\r\n\r\n        styles.forEach(style => {\r\n            if (style.indexOf('slinky') === 0) {\r\n                menu.removeClass(style)\r\n            }\r\n        })\r\n\r\n        // reset fields\r\n        const fields = ['settings', 'menu', 'base']\r\n\r\n        fields.forEach(field => delete this[field])\r\n    }\r\n}\r\n\r\n// jQuery plugin\r\n;($ => {\r\n    $.fn.slinky = function (options) {\r\n        const menu = new Slinky(this, options)\r\n\r\n        return menu\r\n    }\r\n})(jQuery)\r\n"]}